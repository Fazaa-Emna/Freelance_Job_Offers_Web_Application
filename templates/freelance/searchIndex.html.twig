{% extends 'base.html.twig' %}
{% block body %}
  <style></style>
  <!-- Hero Area Start -->
  <div class="slider-area">
    <div class="single-slider section-overly slider-height2 d-flex align-items-center" data-background="{{ asset('assets/img/hero/about.jpg') }}" style="background-image: url('{{ asset('assets/img/hero/about.jpg') }}');">
      <div class="container">
        <div class="row">
          <div class="col-xl-12">
            <div class="hero-cap text-center">
              <h2>Get your job</h2>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Hero Area End -->
  <!-- Job List Area Start -->
  <div class="job-listing-area pt-120 pb-120">
    <div class="container">
      <div class="row">
        <!-- Left content -->
        <div class="col-xl-3 col-lg-3 col-md-4">
          <div class="row">
            <div class="col-12">
              <div class="small-section-tittle2 mb-45">
                <div class="ion">
                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20px" height="12px">
                    <path fill-rule="evenodd" fill="rgb(27, 207, 107)" d="M7.778,12.000 L12.222,12.000 L12.222,10.000 L7.778,10.000 L7.778,12.000 ZM-0.000,-0.000 L-0.000,2.000 L20.000,2.000 L20.000,-0.000 L-0.000,-0.000 ZM3.333,7.000 L16.667,7.000 L16.667,5.000 L3.333,5.000 L3.333,7.000 Z"></path>
                  </svg>
                </div>
                <h4>Filter Jobs</h4>
              </div>
            </div>
          </div>
          <!-- Job Category Listing start -->
          <div class="job-category-listing mb-50">
            <!-- single one -->
            <div class="single-listing">
              <div class="small-section-tittle2">
                <h4>Filter by Category</h4>
              </div>
              <!-- Select job items start -->

              {% set categories = [] %}

              {% for freelance in freelances %}
                {% if freelance.categoryF not in categories %}
                  {% set categories = categories|merge([freelance.categoryF]) %}
                {% endif %}
              {% endfor %}

              {% for category in categories %}
                <div class="default-select" id="default-select">
                  <a href="{{ path('app_freelance_searchCategory', { category: category }) }}" class="genric-btn primary">{{ category }}</a>
                </div>
                <br />
              {% endfor %}
            </div>
            <!-- single three -->
            <div class="single-listing">
              <!-- select-Categories start -->
              <div class="select-Categories pb-50">
                <div class="small-section-tittle2">
                  <h4>Posted Within</h4>
                </div>
                <label class="container items-link items-link2 f-right">
                  <a href="{{ path('app_freelance_index') }}">Any</a><input type="checkbox" checked="checked active" />
                  <span class="checkmark"></span>
                </label>
                <label class="container items-link items-link2 f-right">
                  <a href="{{ path('app_freelance_searchDate', { date: 'today' }) }}">Today</a><input type="checkbox" />
                  <span class="checkmark"></span>
                </label>
                <label class="container items-link items-link2 f-right">
                  <a href="{{ path('app_freelance_searchDate', { date: '2_days' }) }}">Last 2 days</a><input type="checkbox" />
                  <span class="checkmark"></span>
                </label>
                <label class="container items-link items-link2 f-right">
                  <a href="{{ path('app_freelance_searchDate', { date: '3_days' }) }}">Last 3 days</a><input type="checkbox" />
                  <span class="checkmark"></span>
                </label>
                <label class="container items-link items-link2 f-right">
                  <a href="{{ path('app_freelance_searchDate', { date: '5_days' }) }}">Last 5 days</a><input type="checkbox" />
                  <span class="checkmark"></span>
                </label>
                <label class="container items-link items-link2 f-right">
                  <a href="{{ path('app_freelance_searchDate', { date: '10_days' }) }}">Last 10 days</a><input type="checkbox" />
                  <span class="checkmark"></span>
                </label>
              </div>
              <!-- select-Categories End -->
            </div>
            <div class="single-listing">
              <!-- Range Slider Start -->
              <aside class="left_widgets p_filter_widgets price_rangs_aside sidebar_box_shadow">
                <div class="small-section-tittle2">
                  <h4>Filter Jobs</h4>
                </div>
                <div class="widgets_inner">
                  <div class="range_item">
                    <!-- <div id="slider-range"></div> -->
                    <span class="irs js-irs-0">
                      <span class="irs">
                        <span class="irs-line" tabindex="-1">
                          <span class="irs-line-left"></span>
                          <span class="irs-line-mid"></span>
                          <span class="irs-line-right"></span>
                        </span>
                        <span class="irs-min" style="visibility: hidden;">tk. 0</span>
                        <span class="irs-max" style="visibility: visible;">tk. 1.000</span>
                        <span class="irs-from" style="visibility: visible; left: 0%;">tk. 0</span>
                        <span class="irs-to" style="visibility: visible; left: 35.2601%;">tk. 500</span>
                        <span class="irs-single" style="visibility: hidden; left: 4.33526%;">tk. 0 - tk. 500</span>
                      </span>
                      <span class="irs-grid"></span>
                      <span class="irs-bar" style="left: 4.33526%; width: 45.6647%;"></span>
                      <span class="irs-shadow shadow-from" style="display: none;"></span>
                      <span class="irs-shadow shadow-to" style="display: none;"></span>
                      <span class="irs-slider from" style="left: 0%;"></span>
                      <span class="irs-slider to type_last" style="left: 45.6647%;"></span>
                    </span>
                    <input type="text" class="js-range-slider irs-hidden-input" value="" readonly="" />
                    <div class="d-flex align-items-center">
                      <div class="price_text">
                        <p>Price :</p>
                      </div>
                      <div class="price_value d-flex justify-content-center">
                        <input type="text" class="js-input-from" id="amount" readonly="" />
                        <span>to</span>
                        <input type="text" class="js-input-to" id="amount" readonly="" />
                      </div>
                    </div>
                  </div>
                </div>
              </aside>
              <!-- Range Slider End -->
            </div>
          </div>
          <!-- Job Category Listing End -->
        </div>
        <!-- Right content -->
        <div class="col-xl-9 col-lg-9 col-md-8">
          <!-- Featured_job_start -->
          <section class="featured-job-area">
            <div class="container">
              <!-- Count of Job list Start -->
              <div class="row">
                <div class="col-lg-12">
                  <div class="count-job mb-35">
                    <span>
                      {{ freelances|length }}
                      Jobs found
                    </span>
                    <span>
                      {{ freelances|length }}
                      Jobs found
                    </span>
                    <!-- Select job items start -->
                    <div class="select-job-items">
                      <span>Sort by</span>
                      <select name="select" style="display: none;">
                        <option value="">None</option>
                        <option value="">job list</option>
                        <option value="">job list</option>
                        <option value="">job list</option>
                      </select>
                      <div class="nice-select" tabindex="0">
                        <span class="current">None</span>
                        <ul class="list">
                          <li data-value="" class="option selected">None</li>
                          <li data-value="" class="option">job list</li>
                          <li data-value="" class="option">job list</li>
                          <li data-value="" class="option">job list</li>
                        </ul>
                      </div>
                    </div>
                    <div class="items-link items-link2 f-right">
                      <a href="{{ path('app_freelance_new') }}">Create New</a>
                    </div>
                    <!-- Select job items End -->
                  </div>
                </div>
              </div>
              <!-- Count of Job list End -->
              <!-- single-job-content -->
              {% for freelance in freelances %}
                <div class="single-job-items mb-30">
                  <div class="job-items">
                    <div class="company-img">
                      <a href="#"><img src="{{ asset('assets/img/icon/job-list4.png') }}" alt="" /></a>
                    </div>
                    <div class="job-tittle job-tittle2">
                      <a href="{{ path('app_freelance_show', { idfreelance: freelance.idfreelance, idBO: 20 }) }}"><h4>{{ freelance.categoryF }}</h4></a>
                      <ul>
                        <li>{{ freelance.emailbo }}</li>
                        <li>
                          <i class="fas fa-map-marker-alt"></i>
                          Tunisia, Tunis
                        </li>
                        <li>{{ freelance.budget }}
                          TND</li>
                      </ul>
                    </div>
                  </div>
                  {% set currentDate = 'now'|date('d-m-Y') %}
                  {% set add = freelance.adddate|date('d-m-Y') %}
                  {% set diff = date(currentDate).diff(date(add)) %}
                  {% if currentDate == add %}
                    <div class="items-link items-link2 f-right">
                      <a href="#">
                        {{ freelance.nbapplicants|default('0') }}
                        applicants
                      </a>
                      <span>New</span>
                    </div>
                  {% else %}
                    <div class="items-link items-link2 f-right">
                      <a href="#">
                        {{ freelance.nbapplicants|default('0') }}
                        applicants
                      </a>
                      <span>{{ diff.format('%d days ago') }}</span>
                    </div>
                  {% endif %}
                </div>
              {% else %}
                <div class="col-12">
                  <p>No offers found.</p>
                </div>
              {% endfor %}
            </div>
          </section>
          <!-- Featured_job_end -->
        </div>
      </div>
    </div>
  </div>
  <!-- Job List Area End -->
  <!-- Pagination Start -->
  {% if (freelances|length) > 1 %}
    <div class="pagination-area pb-115 text-center">{{ knp_pagination_render(freelances) }}</div>
  {% endif %}

  <!-- Pagination End -->
{% endblock %}
